{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sridh\\\\Desktop\\\\new-exam-builder-ace-main\\\\frontend\\\\src\\\\Exam.js\",\n  _s = $RefreshSig$();\n// // import React, { useState, useEffect } from 'react';\n// // import \"./Exam.css\";\n// // import { getQuestions, submitExam, getResult } from './api';\n\n// // function Exam({ token }) {\n// //   const [questions, setQuestions] = useState([]);\n// //   const [answers, setAnswers] = useState([]);\n// //   const [current, setCurrent] = useState(0);\n// //   const [submitted, setSubmitted] = useState(false);\n// //   const [result, setResult] = useState(null);\n// //   const [timeLeft, setTimeLeft] = useState(30 * 60); // 30 minutes\n\n// //   // Utility: Shuffle array\n// //   const shuffleArray = (arr) => {\n// //     let newArr = [...arr];\n// //     for (let i = newArr.length - 1; i > 0; i--) {\n// //       const j = Math.floor(Math.random() * (i + 1));\n// //       [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\n// //     }\n// //     return newArr;\n// //   };\n\n// //   // Load exam state or fetch new questions\n// //   useEffect(() => {\n// //     const storedQuestions = localStorage.getItem(\"exam_questions\");\n// //     const storedAnswers = localStorage.getItem(\"exam_answers\");\n// //     const storedCurrent = localStorage.getItem(\"exam_current\");\n// //     const storedTimeLeft = localStorage.getItem(\"exam_timeLeft\");\n\n// //     getResult(token)\n// //       .then(r => {\n// //         if (r.data && r.data.review) {\n// //           // Already submitted\n// //           setSubmitted(true);\n// //           setResult(r.data);\n// //         } else if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\n// //           // Resume ongoing exam\n// //           setQuestions(JSON.parse(storedQuestions));\n// //           setAnswers(JSON.parse(storedAnswers));\n// //           setCurrent(parseInt(storedCurrent, 10));\n// //           setTimeLeft(parseInt(storedTimeLeft, 10));\n// //         } else {\n// //           // Start new exam with shuffled questions\n// //           getQuestions(token).then(res => {\n// //             const shuffled = shuffleArray(res.data);\n// //             setQuestions(shuffled);\n// //             setAnswers(Array(shuffled.length).fill(null));\n// //             localStorage.setItem(\"exam_questions\", JSON.stringify(shuffled));\n// //           });\n// //         }\n// //       })\n// //       .catch(() => {\n// //         // Offline or API error — fallback to stored state\n// //         if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\n// //           setQuestions(JSON.parse(storedQuestions));\n// //           setAnswers(JSON.parse(storedAnswers));\n// //           setCurrent(parseInt(storedCurrent, 10));\n// //           setTimeLeft(parseInt(storedTimeLeft, 10));\n// //         } else {\n// //           getQuestions(token).then(res => {\n// //             const shuffled = shuffleArray(res.data);\n// //             setQuestions(shuffled);\n// //             setAnswers(Array(shuffled.length).fill(null));\n// //             localStorage.setItem(\"exam_questions\", JSON.stringify(shuffled));\n// //           });\n// //         }\n// //       });\n// //   }, [token]);\n\n// //   // Save progress\n// //   useEffect(() => {\n// //     if (questions.length && !submitted) {\n// //       localStorage.setItem(\"exam_questions\", JSON.stringify(questions));\n// //       localStorage.setItem(\"exam_answers\", JSON.stringify(answers));\n// //       localStorage.setItem(\"exam_current\", current);\n// //       localStorage.setItem(\"exam_timeLeft\", timeLeft);\n// //     }\n// //   }, [questions, answers, current, timeLeft, submitted]);\n\n// //   // Countdown timer\n// //   useEffect(() => {\n// //     if (!questions.length || submitted) return;\n// //     if (timeLeft <= 0) {\n// //       handleSubmit();\n// //       return;\n// //     }\n// //     const timer = setTimeout(() => setTimeLeft(t => t - 1), 1000);\n// //     return () => clearTimeout(timer);\n// //   }, [questions.length, submitted, timeLeft]);\n\n// //   const handleOption = (idx) => {\n// //     const newAnswers = [...answers];\n// //     newAnswers[current] = idx;\n// //     setAnswers(newAnswers);\n// //   };\n\n// //   const handleSubmit = () => {\n// //     if (submitted) return;\n\n// //     const payload = questions.map((q, i) => ({\n// //       questionId: q._id,\n// //       selectedOption: answers[i]\n// //     }));\n\n// //     submitExam(payload, token).then(() => {\n// //       setSubmitted(true);\n// //       // Clear saved progress\n// //       localStorage.removeItem(\"exam_questions\");\n// //       localStorage.removeItem(\"exam_answers\");\n// //       localStorage.removeItem(\"exam_current\");\n// //       localStorage.removeItem(\"exam_timeLeft\");\n\n// //       getResult(token).then(r => {\n// //         setResult(r.data);\n// //         window.location.hash = '#/results';\n// //       });\n// //     });\n// //   };\n\n// //   if (!questions.length && !submitted) {\n// //     return (\n// //       <div className=\"exam-container\" style={{ textAlign: 'center', padding: '60px 0' }}>\n// //         <h2>Loading questions...</h2>\n// //       </div>\n// //     );\n// //   }\n\n// //   if (submitted && result) {\n// //     return (\n// //       <div className=\"result-container card\">\n// //         <h2>Exam Submitted</h2>\n// //         <div style={{ fontSize: '1.2em', margin: '12px 0' }}>\n// //           <strong>Score:</strong> {result.score} / {result.review.length}\n// //         </div>\n// //         <button onClick={() => window.location.hash = '#/dashboard'}>Return to Dashboard</button>\n// //       </div>\n// //     );\n// //   }\n\n// //   const q = questions[current];\n// //   const minutes = Math.floor(timeLeft / 60);\n// //   const seconds = timeLeft % 60;\n\n// //   return (\n// //     <div className=\"exam-container\">\n// //       <div\n// //         className=\"exam-timer\"\n// //         style={{ textAlign: 'right', fontWeight: '600', color: '#d32f2f', marginBottom: '16px', fontSize: '1.3em' }}\n// //       >\n// //         Time Left: {minutes.toString().padStart(2, '0')}:{seconds.toString().padStart(2, '0')}\n// //       </div>\n\n// //       <h3>Question {current + 1} of {questions.length}</h3>\n// //       <div className=\"question\" style={{ marginBottom: 16 }}>{q.question}</div>\n\n// //       <ul style={{ listStyle: 'none', padding: 0 }}>\n// //         {q.options.map((opt, idx) => (\n// //           <li\n// //             key={idx}\n// //             style={{\n// //               padding: '8px 12px',\n// //               margin: '6px 0',\n// //               border: '2px solid',\n// //               borderColor: answers[current] === idx ? '#1976d2' : '#ccc',\n// //               borderRadius: 6,\n// //               backgroundColor: answers[current] === idx ? '#e3f2fd' : '#fff',\n// //               cursor: 'pointer',\n// //               fontWeight: answers[current] === idx ? 600 : 400\n// //             }}\n// //             onClick={() => handleOption(idx)}\n// //           >\n// //             <span style={{ fontWeight: 'bold', marginRight: 6 }}>\n// //               {String.fromCharCode(65 + idx)}.\n// //             </span>\n// //             {opt}\n// //           </li>\n// //         ))}\n// //       </ul>\n\n// //       <div style={{ display: 'flex', gap: '16px', marginTop: '18px' }}>\n// //         <button disabled={current === 0} onClick={() => setCurrent(c => c - 1)}>Previous</button>\n// //         <button disabled={current === questions.length - 1} onClick={() => setCurrent(c => c + 1)}>Next</button>\n// //         <button onClick={handleSubmit}>Submit Exam</button>\n// //       </div>\n// //     </div>\n// //   );\n// // }\n\n// // export default Exam;\n\n// import React, { useState, useEffect } from 'react';\n// import \"./Exam.css\";\n// import { getQuestions, submitExam, getResult } from './api';\n\n// function Exam({ token }) {\n//   const [questions, setQuestions] = useState([]);\n//   const [answers, setAnswers] = useState([]);\n//   const [current, setCurrent] = useState(0);\n//   const [submitted, setSubmitted] = useState(false);\n//   const [result, setResult] = useState(null);\n//   const [timeLeft, setTimeLeft] = useState(30 * 60); // 30 minutes\n\n//   const shuffleArray = (arr) => {\n//     let newArr = [...arr];\n//     for (let i = newArr.length - 1; i > 0; i--) {\n//       const j = Math.floor(Math.random() * (i + 1));\n//       [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\n//     }\n//     return newArr;\n//   };\n\n//   // Load questions on start\n//   useEffect(() => {\n//     const storedQuestions = localStorage.getItem(\"exam_questions\");\n//     const storedAnswers = localStorage.getItem(\"exam_answers\");\n//     const storedCurrent = localStorage.getItem(\"exam_current\");\n//     const storedTimeLeft = localStorage.getItem(\"exam_timeLeft\");\n\n//     if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\n//       // Resume ongoing exam\n//       setQuestions(JSON.parse(storedQuestions));\n//       setAnswers(JSON.parse(storedAnswers));\n//       setCurrent(parseInt(storedCurrent, 10));\n//       setTimeLeft(parseInt(storedTimeLeft, 10));\n//     } else {\n//       // Fetch new questions\n//       getQuestions(token).then(res => {\n//         const shuffled = shuffleArray(res.data);\n//         setQuestions(shuffled);\n//         setAnswers(Array(shuffled.length).fill(null));\n//         localStorage.setItem(\"exam_questions\", JSON.stringify(shuffled));\n//       });\n//     }\n//   }, [token]);\n\n//   // Save progress\n//   useEffect(() => {\n//     if (questions.length && !submitted) {\n//       localStorage.setItem(\"exam_questions\", JSON.stringify(questions));\n//       localStorage.setItem(\"exam_answers\", JSON.stringify(answers));\n//       localStorage.setItem(\"exam_current\", current);\n//       localStorage.setItem(\"exam_timeLeft\", timeLeft);\n//     }\n//   }, [questions, answers, current, timeLeft, submitted]);\n\n//   // Timer\n//   useEffect(() => {\n//     if (!questions.length || submitted) return;\n//     if (timeLeft <= 0) {\n//       handleSubmit();\n//       return;\n//     }\n//     const timer = setTimeout(() => setTimeLeft(t => t - 1), 1000);\n//     return () => clearTimeout(timer);\n//   }, [questions.length, submitted, timeLeft]);\n\n//   const handleOption = (idx) => {\n//     const newAnswers = [...answers];\n//     newAnswers[current] = idx;\n//     setAnswers(newAnswers);\n//   };\n\n//   const handleSubmit = () => {\n//     if (submitted) return;\n\n//     const payload = questions.map((q, i) => ({\n//       questionId: q._id,\n//       selectedOption: answers[i]\n//     }));\n\n//     submitExam(payload, token).then(() => {\n//       setSubmitted(true);\n//       localStorage.removeItem(\"exam_questions\");\n//       localStorage.removeItem(\"exam_answers\");\n//       localStorage.removeItem(\"exam_current\");\n//       localStorage.removeItem(\"exam_timeLeft\");\n\n//       // Fetch final result\n//       getResult(token).then(r => {\n//         setResult(r.data);\n//         window.location.hash = '#/results';\n//       });\n//     });\n//   };\n\n//   if (!questions.length && !submitted) {\n//     return (\n//       <div className=\"exam-container\" style={{ textAlign: 'center', padding: '60px 0' }}>\n//         <h2>Loading questions...</h2>\n//       </div>\n//     );\n//   }\n\n//   if (submitted && result) {\n//     return (\n//       <div className=\"result-container card\">\n//         <h2>Exam Submitted</h2>\n//         <div style={{ fontSize: '1.2em', margin: '12px 0' }}>\n//           <strong>Score:</strong> {result.score} / {result.review.length}\n//         </div>\n//         <button onClick={() => window.location.hash = '#/dashboard'}>Return to Dashboard</button>\n//       </div>\n//     );\n//   }\n\n//   const q = questions[current];\n//   const minutes = Math.floor(timeLeft / 60);\n//   const seconds = timeLeft % 60;\n\n//   return (\n//     <div className=\"exam-container\">\n//       <div\n//         className=\"exam-timer\"\n//         style={{ textAlign: 'right', fontWeight: '600', color: '#d32f2f', marginBottom: '16px', fontSize: '1.3em' }}\n//       >\n//         Time Left: {minutes.toString().padStart(2, '0')}:{seconds.toString().padStart(2, '0')}\n//       </div>\n\n//       <h3>Question {current + 1} of {questions.length}</h3>\n//       <div className=\"question\" style={{ marginBottom: 16 }}>{q.question}</div>\n\n//       <ul style={{ listStyle: 'none', padding: 0 }}>\n//         {q.options.map((opt, idx) => (\n//           <li\n//             key={idx}\n//             style={{\n//               padding: '8px 12px',\n//               margin: '6px 0',\n//               border: '2px solid',\n//               borderColor: answers[current] === idx ? '#1976d2' : '#ccc',\n//               borderRadius: 6,\n//               backgroundColor: answers[current] === idx ? '#e3f2fd' : '#fff',\n//               cursor: 'pointer',\n//               fontWeight: answers[current] === idx ? 600 : 400\n//             }}\n//             onClick={() => handleOption(idx)}\n//           >\n//             <span style={{ fontWeight: 'bold', marginRight: 6 }}>\n//               {String.fromCharCode(65 + idx)}.\n//             </span>\n//             {opt}\n//           </li>\n//         ))}\n//       </ul>\n\n//       <div style={{ display: 'flex', gap: '16px', marginTop: '18px' }}>\n//         <button disabled={current === 0} onClick={() => setCurrent(c => c - 1)}>Previous</button>\n//         <button disabled={current === questions.length - 1} onClick={() => setCurrent(c => c + 1)}>Next</button>\n//         <button onClick={handleSubmit}>Submit Exam</button>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default Exam;\n\n// import React, { useState, useEffect } from 'react';\n// import \"./Exam.css\";\n// import { getQuestions, submitExam, getResult } from './api';\n\n// function Exam({ token }) {\n//   const [questions, setQuestions] = useState([]);\n//   const [answers, setAnswers] = useState([]);\n//   const [current, setCurrent] = useState(0);\n//   const [submitted, setSubmitted] = useState(false);\n//   const [result, setResult] = useState(null);\n//   const [timeLeft, setTimeLeft] = useState(30 * 60); // 30 minutes\n\n//   // Shuffle questions\n//   const shuffleArray = (arr) => {\n//     const newArr = [...arr];\n//     for (let i = newArr.length - 1; i > 0; i--) {\n//       const j = Math.floor(Math.random() * (i + 1));\n//       [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\n//     }\n//     return newArr;\n//   };\n\n//   // Load questions or resume\n//   useEffect(() => {\n//     const storedQuestions = localStorage.getItem(\"exam_questions\");\n//     const storedAnswers = localStorage.getItem(\"exam_answers\");\n//     const storedCurrent = localStorage.getItem(\"exam_current\");\n//     const storedTimeLeft = localStorage.getItem(\"exam_timeLeft\");\n\n//     getResult(token)\n//       .then(res => {\n//         if (res.data && res.data.review) {\n//           setSubmitted(true);\n//           setResult(res.data);\n//         } else if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\n//           setQuestions(JSON.parse(storedQuestions));\n//           setAnswers(JSON.parse(storedAnswers));\n//           setCurrent(parseInt(storedCurrent, 10));\n//           setTimeLeft(parseInt(storedTimeLeft, 10));\n//         } else {\n//           getQuestions(token).then(res => {\n//             const shuffled = shuffleArray(res.data);\n//             setQuestions(shuffled);\n//             setAnswers(Array(shuffled.length).fill(undefined)); // undefined for unattempted\n//             localStorage.setItem(\"exam_questions\", JSON.stringify(shuffled));\n//           }).catch(err => console.error(\"Error fetching questions:\", err));\n//         }\n//       })\n//       .catch(err => {\n//         // fallback\n//         if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\n//           setQuestions(JSON.parse(storedQuestions));\n//           setAnswers(JSON.parse(storedAnswers));\n//           setCurrent(parseInt(storedCurrent, 10));\n//           setTimeLeft(parseInt(storedTimeLeft, 10));\n//         }\n//       });\n//   }, [token]);\n\n//   // Save progress\n//   useEffect(() => {\n//     if (questions.length && !submitted) {\n//       localStorage.setItem(\"exam_questions\", JSON.stringify(questions));\n//       localStorage.setItem(\"exam_answers\", JSON.stringify(answers));\n//       localStorage.setItem(\"exam_current\", current);\n//       localStorage.setItem(\"exam_timeLeft\", timeLeft);\n//     }\n//   }, [questions, answers, current, timeLeft, submitted]);\n\n//   // Countdown\n//   useEffect(() => {\n//     if (!questions.length || submitted) return;\n//     if (timeLeft <= 0) {\n//       handleSubmit();\n//       return;\n//     }\n//     const timer = setTimeout(() => setTimeLeft(t => t - 1), 1000);\n//     return () => clearTimeout(timer);\n//   }, [questions.length, submitted, timeLeft]);\n\n//   const handleOption = (idx) => {\n//     const newAnswers = [...answers];\n//     newAnswers[current] = idx;\n//     setAnswers(newAnswers);\n//   };\n\n//   const handleSubmit = () => {\n//     if (submitted) return;\n\n//     const payload = questions.map((q, i) => ({\n//       questionId: q._id || q.id,\n//       selectedOption: answers[i] // can be undefined\n//     }));\n\n//     console.log(\"Submitting payload:\", payload); // debug\n\n//     submitExam(payload, token)\n//       .then(() => {\n//         setSubmitted(true);\n//         localStorage.removeItem(\"exam_questions\");\n//         localStorage.removeItem(\"exam_answers\");\n//         localStorage.removeItem(\"exam_current\");\n//         localStorage.removeItem(\"exam_timeLeft\");\n\n//         getResult(token).then(r => {\n//           setResult(r.data);\n//           window.location.hash = '#/results';\n//         });\n//       })\n//       .catch(err => {\n//         console.error(\"Error submitting exam:\", err.response?.data || err.message);\n//         alert(\"Error submitting exam. Please try again.\");\n//       });\n//   };\n\n//   if (!questions.length && !submitted) {\n//     return <div className=\"exam-container\" style={{ textAlign: 'center', padding: '60px 0' }}>Loading questions...</div>;\n//   }\n\n//   if (submitted && result) {\n//     return (\n//       <div className=\"result-container card\">\n//         <h2>Exam Submitted</h2>\n//         <div style={{ fontSize: '1.2em', margin: '12px 0' }}>\n//           <strong>Score:</strong> {result.score} / {result.review.length}\n//         </div>\n//         <button onClick={() => window.location.hash = '#/dashboard'}>Return to Dashboard</button>\n//       </div>\n//     );\n//   }\n\n//   const q = questions[current];\n//   const minutes = Math.floor(timeLeft / 60);\n//   const seconds = timeLeft % 60;\n\n//   return (\n//     <div className=\"exam-container\">\n//       <div className=\"exam-timer\" style={{ textAlign: 'right', fontWeight: 600, color: '#d32f2f', marginBottom: 16, fontSize: '1.3em' }}>\n//         Time Left: {minutes.toString().padStart(2,'0')}:{seconds.toString().padStart(2,'0')}\n//       </div>\n\n//       <h3>Question {current + 1} of {questions.length}</h3>\n//       <div className=\"question\" style={{ marginBottom: 16 }}>{q.question}</div>\n\n//       <ul style={{ listStyle: 'none', padding: 0 }}>\n//         {q.options.map((opt, idx) => (\n//           <li key={idx} style={{\n//             padding: '8px 12px',\n//             margin: '6px 0',\n//             border: '2px solid',\n//             borderColor: answers[current] === idx ? '#1976d2' : '#ccc',\n//             borderRadius: 6,\n//             backgroundColor: answers[current] === idx ? '#e3f2fd' : '#fff',\n//             cursor: 'pointer',\n//             fontWeight: answers[current] === idx ? 600 : 400\n//           }}\n//           onClick={() => handleOption(idx)}>\n//             <span style={{ fontWeight:'bold', marginRight:6 }}>{String.fromCharCode(65+idx)}.</span>\n//             {opt}\n//           </li>\n//         ))}\n//       </ul>\n\n//       <div style={{ display:'flex', gap:'16px', marginTop:'18px' }}>\n//         <button disabled={current===0} onClick={()=>setCurrent(c=>c-1)}>Previous</button>\n//         <button disabled={current===questions.length-1} onClick={()=>setCurrent(c=>c+1)}>Next</button>\n//         <button onClick={handleSubmit}>Submit Exam</button>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default Exam;\n\n// import React, { useState, useEffect } from 'react';\n// import { getQuestions, submitExam, getResult } from './api';\n// import './Exam.css';\n\n// function Exam({ token }) {\n//   const [questions, setQuestions] = useState([]);\n//   const [answers, setAnswers] = useState([]);\n//   const [current, setCurrent] = useState(0);\n//   const [submitted, setSubmitted] = useState(false);\n//   const [result, setResult] = useState(null);\n//   const [timeLeft, setTimeLeft] = useState(30 * 60);\n\n//   useEffect(() => {\n//     getQuestions(token).then(res => {\n//       setQuestions(res.data);\n//       setAnswers(Array(res.data.length).fill(null));\n//     }).catch(err => console.error(err));\n//   }, [token]);\n\n//   useEffect(() => {\n//     if (!questions.length || submitted) return;\n//     if (timeLeft <= 0) {\n//       handleSubmit();\n//       return;\n//     }\n//     const timer = setTimeout(() => setTimeLeft(t => t - 1), 1000);\n//     return () => clearTimeout(timer);\n//   }, [timeLeft, questions, submitted]);\n\n//   const handleOption = idx => {\n//     const newAnswers = [...answers];\n//     newAnswers[current] = idx;\n//     setAnswers(newAnswers);\n//   };\n\n//   const handleSubmit = () => {\n//     if (submitted) return;\n//     const payload = questions.map((q, i) => ({ questionId: q._id, selectedOption: answers[i] }));\n//     submitExam(payload, token)\n//       .then(() => getResult(token))\n//       .then(r => {\n//         setSubmitted(true);\n//         setResult(r.data);\n//         window.location.hash = '#/results';\n//       })\n//       .catch(err => alert('Error submitting exam. Please try again.'));\n//   };\n\n//   if (!questions.length) return <div>Loading questions...</div>;\n\n//   if (submitted && result) return (\n//     <div>\n//       <h2>Exam Submitted</h2>\n//       <div>Score: {result.score} / {result.review.length}</div>\n//       <button onClick={() => window.location.hash = '#/dashboard'}>Return to Dashboard</button>\n//     </div>\n//   );\n\n//   const q = questions[current];\n//   const minutes = Math.floor(timeLeft / 60);\n//   const seconds = timeLeft % 60;\n\n//   return (\n//     <div className=\"exam-container\">\n//       <div>Time Left: {minutes}:{seconds.toString().padStart(2,'0')}</div>\n//       <h3>Question {current+1} of {questions.length}</h3>\n//       <div>{q.question}</div>\n//       <ul>\n//         {q.options.map((opt, i) => (\n//           <li key={i} onClick={() => handleOption(i)} style={{ fontWeight: answers[current] === i ? 'bold' : 'normal' }}>\n//             {String.fromCharCode(65+i)}. {opt}\n//           </li>\n//         ))}\n//       </ul>\n//       <div>\n//         <button disabled={current===0} onClick={()=>setCurrent(c=>c-1)}>Previous</button>\n//         <button disabled={current===questions.length-1} onClick={()=>setCurrent(c=>c+1)}>Next</button>\n//         <button onClick={handleSubmit}>Submit Exam</button>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default Exam;\n\n// import React, { useState, useEffect } from \"react\";\n// import axios from \"axios\";   // ✅ Add this line\n// import { getQuestions, submitExam, getResult } from \"./api\";\n// import \"./Exam.css\";\n\n// function Exam({ token }) {\n//   const [questions, setQuestions] = useState([]);\n//   const [answers, setAnswers] = useState([]);\n//   const [current, setCurrent] = useState(0);\n//   const [submitted, setSubmitted] = useState(false);\n//   const [result, setResult] = useState(null);\n//   const [timeLeft, setTimeLeft] = useState(30 * 60);\n\n//   const shuffleArray = (arr) => {\n//     let newArr = [...arr];\n//     for (let i = newArr.length - 1; i > 0; i--) {\n//       const j = Math.floor(Math.random() * (i + 1));\n//       [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\n//     }\n//     return newArr;\n//   };\n\n//   // Load state or fetch\n//   useEffect(() => {\n//     const storedQuestions = localStorage.getItem(\"exam_questions\");\n//     const storedAnswers = localStorage.getItem(\"exam_answers\");\n//     const storedCurrent = localStorage.getItem(\"exam_current\");\n//     const storedTimeLeft = localStorage.getItem(\"exam_timeLeft\");\n\n//     if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\n//       setQuestions(JSON.parse(storedQuestions));\n//       setAnswers(JSON.parse(storedAnswers));\n//       setCurrent(parseInt(storedCurrent, 10));\n//       setTimeLeft(parseInt(storedTimeLeft, 10));\n//     } else {\n//       getQuestions(token).then((res) => {\n//         const shuffled = shuffleArray(res.data);\n//         setQuestions(shuffled);\n//         setAnswers(Array(shuffled.length).fill(null));\n//         localStorage.setItem(\"exam_questions\", JSON.stringify(shuffled));\n//         localStorage.setItem(\"exam_answers\", JSON.stringify(Array(shuffled.length).fill(null)));\n//         localStorage.setItem(\"exam_current\", 0);\n//         localStorage.setItem(\"exam_timeLeft\", 30 * 60);\n//       });\n//     }\n//   }, [token]);\n\n//   // Save progress\n//   useEffect(() => {\n//     if (questions.length && !submitted) {\n//       localStorage.setItem(\"exam_questions\", JSON.stringify(questions));\n//       localStorage.setItem(\"exam_answers\", JSON.stringify(answers));\n//       localStorage.setItem(\"exam_current\", current);\n//       localStorage.setItem(\"exam_timeLeft\", timeLeft);\n//     }\n//   }, [questions, answers, current, timeLeft, submitted]);\n\n//   // Timer\n//   useEffect(() => {\n//     if (!questions.length || submitted) return;\n//     if (timeLeft <= 0) {\n//       handleSubmit();\n//       return;\n//     }\n//     const timer = setTimeout(() => {\n//       setTimeLeft((t) => {\n//         localStorage.setItem(\"exam_timeLeft\", t - 1);\n//         return t - 1;\n//       });\n//     }, 1000);\n//     return () => clearTimeout(timer);\n//   }, [questions.length, submitted, timeLeft]);\n\n//   const handleOption = (idx) => {\n//     const newAnswers = [...answers];\n//     newAnswers[current] = idx;\n//     setAnswers(newAnswers);\n//   };\n\n//   const handleSubmit = () => {\n//     if (submitted) return;\n//     const payload = questions.map((q, i) => ({ questionId: q._id, selectedOption: answers[i] }));\n\n//     submitExam(payload, token)\n//       .then(() => {\n//         setSubmitted(true);\n//         localStorage.removeItem(\"exam_questions\");\n//         localStorage.removeItem(\"exam_answers\");\n//         localStorage.removeItem(\"exam_current\");\n//         localStorage.removeItem(\"exam_timeLeft\");\n\n//         getResult(token).then((r) => {\n//           setResult(r.data);\n//           window.location.hash = \"#/results\";\n//         });\n//       })\n//       .catch(() => alert(\"Error submitting exam. Please try again.\"));\n//   };\n\n//   if (!questions.length && !submitted) return <div className=\"exam-container\">Loading questions...</div>;\n//   if (submitted && result)\n//     return (\n//       <div className=\"exam-container\">\n//         <h2>Exam Submitted</h2>\n//         <div>\n//           Score: {result.score} / {result.review.length}\n//         </div>\n//         <button onClick={() => (window.location.hash = \"#/dashboard\")}>Return to Dashboard</button>\n//       </div>\n//     );\n\n//   const q = questions[current];\n//   const minutes = Math.floor(timeLeft / 60);\n//   const seconds = timeLeft % 60;\n\n//   return (\n//     <div className=\"exam-container\">\n//       <div style={{ textAlign: \"right\", color: \"#d32f2f\", fontWeight: 600 }}>\n//         Time Left: {minutes.toString().padStart(2, \"0\")}:{seconds.toString().padStart(2, \"0\")}\n//       </div>\n//       <h3>\n//         Question {current + 1} of {questions.length}\n//       </h3>\n//       <div>{q.question}</div>\n//       <ul style={{ listStyle: \"none\", padding: 0 }}>\n//         {q.options.map((opt, idx) => (\n//           <li\n//             key={idx}\n//             onClick={() => handleOption(idx)}\n//             style={{\n//               padding: \"8px\",\n//               margin: \"6px 0\",\n//               border: answers[current] === idx ? \"2px solid #1976d2\" : \"2px solid #ccc\",\n//               borderRadius: 6,\n//               backgroundColor: answers[current] === idx ? \"#e3f2fd\" : \"#fff\",\n//               cursor: \"pointer\",\n//             }}\n//           >\n//             {String.fromCharCode(65 + idx)}. {opt}\n//           </li>\n//         ))}\n//       </ul>\n//       <div style={{ display: \"flex\", gap: \"12px\", marginTop: \"16px\" }}>\n//         <button disabled={current === 0} onClick={() => setCurrent((c) => c - 1)}>\n//           Previous\n//         </button>\n//         <button disabled={current === questions.length - 1} onClick={() => setCurrent((c) => c + 1)}>\n//           Next\n//         </button>\n//         <button onClick={handleSubmit}>Submit Exam</button>\n//       </div>\n//     </div>\n//   );\n// }\n\n// import React, { useState, useEffect } from \"react\";\n// import axios from \"axios\";\n// import \"./Exam.css\";\n// // Before: import { getQuestions, submitExam, getResult } from \"./api\";\n// import { getQuestions, submitExam, getResult } from \"./api.js\";\n\n// function Exam({ token }) {\n//   const [questions, setQuestions] = useState([]);\n//   const [answers, setAnswers] = useState([]);\n//   const [current, setCurrent] = useState(0);\n//   const [submitted, setSubmitted] = useState(false);\n//   const [result, setResult] = useState(null);\n//   const [timeLeft, setTimeLeft] = useState(30 * 60);\n\n//   // Fetch questions from backend\n//   useEffect(() => {\n//     if (!token) return;\n\n//     axios\n//       .get(\"http://localhost:5000/api/exam/questions\", {\n//         headers: { Authorization: `Bearer ${token}` },\n//       })\n//       .then((res) => {\n//         setQuestions(res.data);\n//         setAnswers(Array(res.data.length).fill(null));\n//       })\n//       .catch((err) => console.error(\"Failed to fetch questions:\", err));\n//   }, [token]);\n\n//   // Timer\n//   useEffect(() => {\n//     if (!questions.length || submitted) return;\n//     if (timeLeft <= 0) {\n//       handleSubmit();\n//       return;\n//     }\n//     const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);\n//     return () => clearTimeout(timer);\n//   }, [timeLeft, questions.length, submitted]);\n\n//   const handleOption = (idx) => {\n//     const newAnswers = [...answers];\n//     newAnswers[current] = idx;\n//     setAnswers(newAnswers);\n//   };\n\n//   const handleSubmit = () => {\n//   if (submitted) return;\n\n//   const payload = questions.map((q, i) => ({\n//     questionId: q._id,\n//     selectedOption: answers[i],\n//   }));\n\n//   submitExam(payload, token)\n//     .then((res) => {\n//       setSubmitted(true);\n//       localStorage.removeItem(\"exam_questions\");\n//       localStorage.removeItem(\"exam_answers\");\n//       localStorage.removeItem(\"exam_current\");\n//       localStorage.removeItem(\"exam_timeLeft\");\n\n//       // Fetch result immediately\n//       getResult(token)\n//         .then((r) => {\n//           setResult(r.data);\n//           window.location.hash = \"#/results\";\n//         })\n//         .catch((err) => console.error(err));\n//     })\n//     .catch((err) => {\n//       console.error(err);\n//       alert(err.response?.data?.message || \"Error submitting exam\");\n//     });\n// };\n\n//   if (!questions.length) return <div className=\"exam-container\">Loading questions...</div>;\n\n//   if (submitted && result)\n//     return (\n//       <div className=\"exam-container\">\n//         <h2>Exam Submitted</h2>\n//         <div>\n//           Score: {result.score} / {result.answers.length}\n//         </div>\n//         <button onClick={() => (window.location.hash = \"#/dashboard\")}>\n//           Return to Dashboard\n//         </button>\n//       </div>\n//     );\n\n//   const q = questions[current];\n//   const minutes = Math.floor(timeLeft / 60);\n//   const seconds = timeLeft % 60;\n\n//   return (\n//     <div className=\"exam-container\">\n//       <div style={{ textAlign: \"right\", color: \"#d32f2f\", fontWeight: 600 }}>\n//         Time Left: {minutes.toString().padStart(2, \"0\")}:{seconds.toString().padStart(2, \"0\")}\n//       </div>\n//       <h3>\n//         Question {current + 1} of {questions.length}\n//       </h3>\n//       <div>{q.question}</div>\n//       <ul style={{ listStyle: \"none\", padding: 0 }}>\n//         {q.options.map((opt, idx) => (\n//           <li\n//             key={idx}\n//             onClick={() => handleOption(idx)}\n//             style={{\n//               padding: \"8px\",\n//               margin: \"6px 0\",\n//               border: answers[current] === idx ? \"2px solid #1976d2\" : \"2px solid #ccc\",\n//               borderRadius: 6,\n//               backgroundColor: answers[current] === idx ? \"#e3f2fd\" : \"#fff\",\n//               cursor: \"pointer\",\n//             }}\n//           >\n//             {String.fromCharCode(65 + idx)}. {opt}\n//           </li>\n//         ))}\n//       </ul>\n//       <div style={{ display: \"flex\", gap: \"12px\", marginTop: \"16px\" }}>\n//         <button disabled={current === 0} onClick={() => setCurrent(current - 1)}>\n//           Previous\n//         </button>\n//         <button disabled={current === questions.length - 1} onClick={() => setCurrent(current + 1)}>\n//           Next\n//         </button>\n//         <button onClick={handleSubmit}>Submit Exam</button>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default Exam;\n\n// import React, { useState, useEffect } from \"react\";\n// import { getQuestions, submitExam, getResult } from \"./api.js\";\n\n// function Exam({ token }) {\n//   const [questions, setQuestions] = useState([]);\n//   const [answers, setAnswers] = useState([]);\n//   const [current, setCurrent] = useState(0);\n//   const [submitted, setSubmitted] = useState(false);\n//   const [result, setResult] = useState(null);\n//   const [timeLeft, setTimeLeft] = useState(30 * 60);\n\n//   // Load state from localStorage\n//   useEffect(() => {\n//     const savedQuestions = JSON.parse(localStorage.getItem(\"exam_questions\"));\n//     const savedAnswers = JSON.parse(localStorage.getItem(\"exam_answers\"));\n//     const savedCurrent = parseInt(localStorage.getItem(\"exam_current\"));\n//     const savedTime = parseInt(localStorage.getItem(\"exam_timeLeft\"));\n\n//     if (savedQuestions?.length) {\n//       setQuestions(savedQuestions);\n//       setAnswers(savedAnswers || Array(savedQuestions.length).fill(null));\n//       setCurrent(!isNaN(savedCurrent) ? savedCurrent : 0);\n//       setTimeLeft(!isNaN(savedTime) ? savedTime : 30 * 60);\n//     } else {\n//       // Fetch from backend\n//       fetchQuestions();\n//     }\n//   }, [token]);\n\n//   const fetchQuestions = async () => {\n//     try {\n//       const res = await getQuestions(token);\n//       setQuestions(res.data);\n//       setAnswers(Array(res.data.length).fill(null));\n//       localStorage.setItem(\"exam_questions\", JSON.stringify(res.data));\n//       localStorage.setItem(\"exam_answers\", JSON.stringify(Array(res.data.length).fill(null)));\n//     } catch (err) {\n//       console.error(\"Failed to fetch questions:\", err);\n//     }\n//   };\n\n//   // Timer\n//   useEffect(() => {\n//     if (!questions.length || submitted) return;\n//     if (timeLeft <= 0) {\n//       handleSubmit();\n//       return;\n//     }\n//     const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);\n//     return () => clearTimeout(timer);\n//   }, [timeLeft, questions.length, submitted]);\n\n//   // Save state on changes\n//   useEffect(() => {\n//     localStorage.setItem(\"exam_current\", current);\n//     localStorage.setItem(\"exam_answers\", JSON.stringify(answers));\n//     localStorage.setItem(\"exam_timeLeft\", timeLeft);\n//   }, [current, answers, timeLeft]);\n\n//   const handleOption = (idx) => {\n//     const newAnswers = [...answers];\n//     newAnswers[current] = idx;\n//     setAnswers(newAnswers);\n//   };\n\n//   const handleSubmit = async () => {\n//     if (submitted) return;\n//     const payload = questions.map((q, i) => ({\n//       questionId: q._id,\n//       selectedOption: answers[i],\n//     }));\n\n//     try {\n//       await submitExam(payload, token);\n//       setSubmitted(true);\n\n//       // Clear localStorage\n//       localStorage.removeItem(\"exam_questions\");\n//       localStorage.removeItem(\"exam_answers\");\n//       localStorage.removeItem(\"exam_current\");\n//       localStorage.removeItem(\"exam_timeLeft\");\n\n//       const r = await getResult(token);\n//       setResult(r.data);\n//       window.location.hash = \"#/results\";\n//     } catch (err) {\n//       console.error(err);\n//       alert(err.response?.data?.message || \"Error submitting exam\");\n//     }\n//   };\n\n//   if (!questions.length) return <div className=\"exam-container\">Loading questions...</div>;\n\n//   if (submitted && result)\n//     return (\n//       <div className=\"exam-container\">\n//         <h2>Exam Submitted</h2>\n//         <div>\n//           Score: {result.score} / {result.answers.length}\n//         </div>\n//         <button onClick={() => (window.location.hash = \"#/dashboard\")}>Return to Dashboard</button>\n//       </div>\n//     );\n\n//   const q = questions[current];\n//   const minutes = Math.floor(timeLeft / 60);\n//   const seconds = timeLeft % 60;\n\n//   return (\n//     <div className=\"exam-container\">\n//       <div style={{ textAlign: \"right\", color: \"#d32f2f\", fontWeight: 600 }}>\n//         Time Left: {minutes.toString().padStart(2, \"0\")}:{seconds.toString().padStart(2, \"0\")}\n//       </div>\n//       <h3>\n//         Question {current + 1} of {questions.length}\n//       </h3>\n//       <div>{q.question}</div>\n//       <ul style={{ listStyle: \"none\", padding: 0 }}>\n//         {q.options.map((opt, idx) => (\n//           <li\n//             key={idx}\n//             onClick={() => handleOption(idx)}\n//             style={{\n//               padding: \"8px\",\n//               margin: \"6px 0\",\n//               border: answers[current] === idx ? \"2px solid #1976d2\" : \"2px solid #ccc\",\n//               borderRadius: 6,\n//               backgroundColor: answers[current] === idx ? \"#e3f2fd\" : \"#fff\",\n//               cursor: \"pointer\",\n//             }}\n//           >\n//             {String.fromCharCode(65 + idx)}. {opt}\n//           </li>\n//         ))}\n//       </ul>\n//       <div style={{ display: \"flex\", gap: \"12px\", marginTop: \"16px\" }}>\n//         <button disabled={current === 0} onClick={() => setCurrent(current - 1)}>Previous</button>\n//         <button disabled={current === questions.length - 1} onClick={() => setCurrent(current + 1)}>Next</button>\n//         <button onClick={handleSubmit}>Submit Exam</button>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default Exam;\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Exam({\n  token\n}) {\n  _s();\n  const [questions, setQuestions] = useState([]);\n  const [answers, setAnswers] = useState({});\n  useEffect(() => {\n    // When the exam page loads, mark as in progress\n    localStorage.setItem(\"inExam\", \"true\");\n    axios.get(\"http://localhost:5000/api/exam\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      setQuestions(res.data.questions);\n    }).catch(err => {\n      console.error(\"Error fetching exam questions:\", err);\n    });\n  }, [token]);\n  const handleAnswerChange = (qId, value) => {\n    setAnswers(prev => ({\n      ...prev,\n      [qId]: value\n    }));\n  };\n  const handleSubmit = () => {\n    axios.post(\"http://localhost:5000/api/exam/submit\", {\n      answers\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(() => {\n      // Exam submitted → clear flag\n      localStorage.removeItem(\"inExam\");\n      window.location.hash = \"#/results\";\n    }).catch(err => {\n      alert(\"Submit failed, please try again.\");\n      console.error(err);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Exam\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1110,\n      columnNumber: 7\n    }, this), questions.map(q => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: q.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1113,\n        columnNumber: 11\n      }, this), q.options.map((opt, i) => /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: q._id,\n          value: opt,\n          checked: answers[q._id] === opt,\n          onChange: e => handleAnswerChange(q._id, e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1116,\n          columnNumber: 15\n        }, this), opt]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1115,\n        columnNumber: 13\n      }, this))]\n    }, q._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1112,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSubmit,\n      children: \"Submit Exam\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1130,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1109,\n    columnNumber: 5\n  }, this);\n}\n_s(Exam, \"oYVJJyJHz36kVu40mwh9jR1WCQ0=\");\n_c = Exam;\nexport default Exam;\nvar _c;\n$RefreshReg$(_c, \"Exam\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Exam","token","_s","questions","setQuestions","answers","setAnswers","localStorage","setItem","get","headers","Authorization","then","res","data","catch","err","console","error","handleAnswerChange","qId","value","prev","handleSubmit","post","removeItem","window","location","hash","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","map","q","text","options","opt","i","type","name","_id","checked","onChange","e","target","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Sridh/Desktop/new-exam-builder-ace-main/frontend/src/Exam.js"],"sourcesContent":["// // import React, { useState, useEffect } from 'react';\r\n// // import \"./Exam.css\";\r\n// // import { getQuestions, submitExam, getResult } from './api';\r\n\r\n// // function Exam({ token }) {\r\n// //   const [questions, setQuestions] = useState([]);\r\n// //   const [answers, setAnswers] = useState([]);\r\n// //   const [current, setCurrent] = useState(0);\r\n// //   const [submitted, setSubmitted] = useState(false);\r\n// //   const [result, setResult] = useState(null);\r\n// //   const [timeLeft, setTimeLeft] = useState(30 * 60); // 30 minutes\r\n\r\n// //   // Utility: Shuffle array\r\n// //   const shuffleArray = (arr) => {\r\n// //     let newArr = [...arr];\r\n// //     for (let i = newArr.length - 1; i > 0; i--) {\r\n// //       const j = Math.floor(Math.random() * (i + 1));\r\n// //       [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\r\n// //     }\r\n// //     return newArr;\r\n// //   };\r\n\r\n// //   // Load exam state or fetch new questions\r\n// //   useEffect(() => {\r\n// //     const storedQuestions = localStorage.getItem(\"exam_questions\");\r\n// //     const storedAnswers = localStorage.getItem(\"exam_answers\");\r\n// //     const storedCurrent = localStorage.getItem(\"exam_current\");\r\n// //     const storedTimeLeft = localStorage.getItem(\"exam_timeLeft\");\r\n\r\n// //     getResult(token)\r\n// //       .then(r => {\r\n// //         if (r.data && r.data.review) {\r\n// //           // Already submitted\r\n// //           setSubmitted(true);\r\n// //           setResult(r.data);\r\n// //         } else if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\r\n// //           // Resume ongoing exam\r\n// //           setQuestions(JSON.parse(storedQuestions));\r\n// //           setAnswers(JSON.parse(storedAnswers));\r\n// //           setCurrent(parseInt(storedCurrent, 10));\r\n// //           setTimeLeft(parseInt(storedTimeLeft, 10));\r\n// //         } else {\r\n// //           // Start new exam with shuffled questions\r\n// //           getQuestions(token).then(res => {\r\n// //             const shuffled = shuffleArray(res.data);\r\n// //             setQuestions(shuffled);\r\n// //             setAnswers(Array(shuffled.length).fill(null));\r\n// //             localStorage.setItem(\"exam_questions\", JSON.stringify(shuffled));\r\n// //           });\r\n// //         }\r\n// //       })\r\n// //       .catch(() => {\r\n// //         // Offline or API error — fallback to stored state\r\n// //         if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\r\n// //           setQuestions(JSON.parse(storedQuestions));\r\n// //           setAnswers(JSON.parse(storedAnswers));\r\n// //           setCurrent(parseInt(storedCurrent, 10));\r\n// //           setTimeLeft(parseInt(storedTimeLeft, 10));\r\n// //         } else {\r\n// //           getQuestions(token).then(res => {\r\n// //             const shuffled = shuffleArray(res.data);\r\n// //             setQuestions(shuffled);\r\n// //             setAnswers(Array(shuffled.length).fill(null));\r\n// //             localStorage.setItem(\"exam_questions\", JSON.stringify(shuffled));\r\n// //           });\r\n// //         }\r\n// //       });\r\n// //   }, [token]);\r\n\r\n// //   // Save progress\r\n// //   useEffect(() => {\r\n// //     if (questions.length && !submitted) {\r\n// //       localStorage.setItem(\"exam_questions\", JSON.stringify(questions));\r\n// //       localStorage.setItem(\"exam_answers\", JSON.stringify(answers));\r\n// //       localStorage.setItem(\"exam_current\", current);\r\n// //       localStorage.setItem(\"exam_timeLeft\", timeLeft);\r\n// //     }\r\n// //   }, [questions, answers, current, timeLeft, submitted]);\r\n\r\n// //   // Countdown timer\r\n// //   useEffect(() => {\r\n// //     if (!questions.length || submitted) return;\r\n// //     if (timeLeft <= 0) {\r\n// //       handleSubmit();\r\n// //       return;\r\n// //     }\r\n// //     const timer = setTimeout(() => setTimeLeft(t => t - 1), 1000);\r\n// //     return () => clearTimeout(timer);\r\n// //   }, [questions.length, submitted, timeLeft]);\r\n\r\n// //   const handleOption = (idx) => {\r\n// //     const newAnswers = [...answers];\r\n// //     newAnswers[current] = idx;\r\n// //     setAnswers(newAnswers);\r\n// //   };\r\n\r\n// //   const handleSubmit = () => {\r\n// //     if (submitted) return;\r\n\r\n// //     const payload = questions.map((q, i) => ({\r\n// //       questionId: q._id,\r\n// //       selectedOption: answers[i]\r\n// //     }));\r\n\r\n// //     submitExam(payload, token).then(() => {\r\n// //       setSubmitted(true);\r\n// //       // Clear saved progress\r\n// //       localStorage.removeItem(\"exam_questions\");\r\n// //       localStorage.removeItem(\"exam_answers\");\r\n// //       localStorage.removeItem(\"exam_current\");\r\n// //       localStorage.removeItem(\"exam_timeLeft\");\r\n\r\n// //       getResult(token).then(r => {\r\n// //         setResult(r.data);\r\n// //         window.location.hash = '#/results';\r\n// //       });\r\n// //     });\r\n// //   };\r\n\r\n// //   if (!questions.length && !submitted) {\r\n// //     return (\r\n// //       <div className=\"exam-container\" style={{ textAlign: 'center', padding: '60px 0' }}>\r\n// //         <h2>Loading questions...</h2>\r\n// //       </div>\r\n// //     );\r\n// //   }\r\n\r\n// //   if (submitted && result) {\r\n// //     return (\r\n// //       <div className=\"result-container card\">\r\n// //         <h2>Exam Submitted</h2>\r\n// //         <div style={{ fontSize: '1.2em', margin: '12px 0' }}>\r\n// //           <strong>Score:</strong> {result.score} / {result.review.length}\r\n// //         </div>\r\n// //         <button onClick={() => window.location.hash = '#/dashboard'}>Return to Dashboard</button>\r\n// //       </div>\r\n// //     );\r\n// //   }\r\n\r\n// //   const q = questions[current];\r\n// //   const minutes = Math.floor(timeLeft / 60);\r\n// //   const seconds = timeLeft % 60;\r\n\r\n// //   return (\r\n// //     <div className=\"exam-container\">\r\n// //       <div\r\n// //         className=\"exam-timer\"\r\n// //         style={{ textAlign: 'right', fontWeight: '600', color: '#d32f2f', marginBottom: '16px', fontSize: '1.3em' }}\r\n// //       >\r\n// //         Time Left: {minutes.toString().padStart(2, '0')}:{seconds.toString().padStart(2, '0')}\r\n// //       </div>\r\n\r\n// //       <h3>Question {current + 1} of {questions.length}</h3>\r\n// //       <div className=\"question\" style={{ marginBottom: 16 }}>{q.question}</div>\r\n\r\n// //       <ul style={{ listStyle: 'none', padding: 0 }}>\r\n// //         {q.options.map((opt, idx) => (\r\n// //           <li\r\n// //             key={idx}\r\n// //             style={{\r\n// //               padding: '8px 12px',\r\n// //               margin: '6px 0',\r\n// //               border: '2px solid',\r\n// //               borderColor: answers[current] === idx ? '#1976d2' : '#ccc',\r\n// //               borderRadius: 6,\r\n// //               backgroundColor: answers[current] === idx ? '#e3f2fd' : '#fff',\r\n// //               cursor: 'pointer',\r\n// //               fontWeight: answers[current] === idx ? 600 : 400\r\n// //             }}\r\n// //             onClick={() => handleOption(idx)}\r\n// //           >\r\n// //             <span style={{ fontWeight: 'bold', marginRight: 6 }}>\r\n// //               {String.fromCharCode(65 + idx)}.\r\n// //             </span>\r\n// //             {opt}\r\n// //           </li>\r\n// //         ))}\r\n// //       </ul>\r\n\r\n// //       <div style={{ display: 'flex', gap: '16px', marginTop: '18px' }}>\r\n// //         <button disabled={current === 0} onClick={() => setCurrent(c => c - 1)}>Previous</button>\r\n// //         <button disabled={current === questions.length - 1} onClick={() => setCurrent(c => c + 1)}>Next</button>\r\n// //         <button onClick={handleSubmit}>Submit Exam</button>\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // export default Exam;\r\n\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import \"./Exam.css\";\r\n// import { getQuestions, submitExam, getResult } from './api';\r\n\r\n// function Exam({ token }) {\r\n//   const [questions, setQuestions] = useState([]);\r\n//   const [answers, setAnswers] = useState([]);\r\n//   const [current, setCurrent] = useState(0);\r\n//   const [submitted, setSubmitted] = useState(false);\r\n//   const [result, setResult] = useState(null);\r\n//   const [timeLeft, setTimeLeft] = useState(30 * 60); // 30 minutes\r\n\r\n//   const shuffleArray = (arr) => {\r\n//     let newArr = [...arr];\r\n//     for (let i = newArr.length - 1; i > 0; i--) {\r\n//       const j = Math.floor(Math.random() * (i + 1));\r\n//       [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\r\n//     }\r\n//     return newArr;\r\n//   };\r\n\r\n//   // Load questions on start\r\n//   useEffect(() => {\r\n//     const storedQuestions = localStorage.getItem(\"exam_questions\");\r\n//     const storedAnswers = localStorage.getItem(\"exam_answers\");\r\n//     const storedCurrent = localStorage.getItem(\"exam_current\");\r\n//     const storedTimeLeft = localStorage.getItem(\"exam_timeLeft\");\r\n\r\n//     if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\r\n//       // Resume ongoing exam\r\n//       setQuestions(JSON.parse(storedQuestions));\r\n//       setAnswers(JSON.parse(storedAnswers));\r\n//       setCurrent(parseInt(storedCurrent, 10));\r\n//       setTimeLeft(parseInt(storedTimeLeft, 10));\r\n//     } else {\r\n//       // Fetch new questions\r\n//       getQuestions(token).then(res => {\r\n//         const shuffled = shuffleArray(res.data);\r\n//         setQuestions(shuffled);\r\n//         setAnswers(Array(shuffled.length).fill(null));\r\n//         localStorage.setItem(\"exam_questions\", JSON.stringify(shuffled));\r\n//       });\r\n//     }\r\n//   }, [token]);\r\n\r\n//   // Save progress\r\n//   useEffect(() => {\r\n//     if (questions.length && !submitted) {\r\n//       localStorage.setItem(\"exam_questions\", JSON.stringify(questions));\r\n//       localStorage.setItem(\"exam_answers\", JSON.stringify(answers));\r\n//       localStorage.setItem(\"exam_current\", current);\r\n//       localStorage.setItem(\"exam_timeLeft\", timeLeft);\r\n//     }\r\n//   }, [questions, answers, current, timeLeft, submitted]);\r\n\r\n//   // Timer\r\n//   useEffect(() => {\r\n//     if (!questions.length || submitted) return;\r\n//     if (timeLeft <= 0) {\r\n//       handleSubmit();\r\n//       return;\r\n//     }\r\n//     const timer = setTimeout(() => setTimeLeft(t => t - 1), 1000);\r\n//     return () => clearTimeout(timer);\r\n//   }, [questions.length, submitted, timeLeft]);\r\n\r\n//   const handleOption = (idx) => {\r\n//     const newAnswers = [...answers];\r\n//     newAnswers[current] = idx;\r\n//     setAnswers(newAnswers);\r\n//   };\r\n\r\n//   const handleSubmit = () => {\r\n//     if (submitted) return;\r\n\r\n//     const payload = questions.map((q, i) => ({\r\n//       questionId: q._id,\r\n//       selectedOption: answers[i]\r\n//     }));\r\n\r\n//     submitExam(payload, token).then(() => {\r\n//       setSubmitted(true);\r\n//       localStorage.removeItem(\"exam_questions\");\r\n//       localStorage.removeItem(\"exam_answers\");\r\n//       localStorage.removeItem(\"exam_current\");\r\n//       localStorage.removeItem(\"exam_timeLeft\");\r\n\r\n//       // Fetch final result\r\n//       getResult(token).then(r => {\r\n//         setResult(r.data);\r\n//         window.location.hash = '#/results';\r\n//       });\r\n//     });\r\n//   };\r\n\r\n//   if (!questions.length && !submitted) {\r\n//     return (\r\n//       <div className=\"exam-container\" style={{ textAlign: 'center', padding: '60px 0' }}>\r\n//         <h2>Loading questions...</h2>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   if (submitted && result) {\r\n//     return (\r\n//       <div className=\"result-container card\">\r\n//         <h2>Exam Submitted</h2>\r\n//         <div style={{ fontSize: '1.2em', margin: '12px 0' }}>\r\n//           <strong>Score:</strong> {result.score} / {result.review.length}\r\n//         </div>\r\n//         <button onClick={() => window.location.hash = '#/dashboard'}>Return to Dashboard</button>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   const q = questions[current];\r\n//   const minutes = Math.floor(timeLeft / 60);\r\n//   const seconds = timeLeft % 60;\r\n\r\n//   return (\r\n//     <div className=\"exam-container\">\r\n//       <div\r\n//         className=\"exam-timer\"\r\n//         style={{ textAlign: 'right', fontWeight: '600', color: '#d32f2f', marginBottom: '16px', fontSize: '1.3em' }}\r\n//       >\r\n//         Time Left: {minutes.toString().padStart(2, '0')}:{seconds.toString().padStart(2, '0')}\r\n//       </div>\r\n\r\n//       <h3>Question {current + 1} of {questions.length}</h3>\r\n//       <div className=\"question\" style={{ marginBottom: 16 }}>{q.question}</div>\r\n\r\n//       <ul style={{ listStyle: 'none', padding: 0 }}>\r\n//         {q.options.map((opt, idx) => (\r\n//           <li\r\n//             key={idx}\r\n//             style={{\r\n//               padding: '8px 12px',\r\n//               margin: '6px 0',\r\n//               border: '2px solid',\r\n//               borderColor: answers[current] === idx ? '#1976d2' : '#ccc',\r\n//               borderRadius: 6,\r\n//               backgroundColor: answers[current] === idx ? '#e3f2fd' : '#fff',\r\n//               cursor: 'pointer',\r\n//               fontWeight: answers[current] === idx ? 600 : 400\r\n//             }}\r\n//             onClick={() => handleOption(idx)}\r\n//           >\r\n//             <span style={{ fontWeight: 'bold', marginRight: 6 }}>\r\n//               {String.fromCharCode(65 + idx)}.\r\n//             </span>\r\n//             {opt}\r\n//           </li>\r\n//         ))}\r\n//       </ul>\r\n\r\n//       <div style={{ display: 'flex', gap: '16px', marginTop: '18px' }}>\r\n//         <button disabled={current === 0} onClick={() => setCurrent(c => c - 1)}>Previous</button>\r\n//         <button disabled={current === questions.length - 1} onClick={() => setCurrent(c => c + 1)}>Next</button>\r\n//         <button onClick={handleSubmit}>Submit Exam</button>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Exam;\r\n\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import \"./Exam.css\";\r\n// import { getQuestions, submitExam, getResult } from './api';\r\n\r\n// function Exam({ token }) {\r\n//   const [questions, setQuestions] = useState([]);\r\n//   const [answers, setAnswers] = useState([]);\r\n//   const [current, setCurrent] = useState(0);\r\n//   const [submitted, setSubmitted] = useState(false);\r\n//   const [result, setResult] = useState(null);\r\n//   const [timeLeft, setTimeLeft] = useState(30 * 60); // 30 minutes\r\n\r\n//   // Shuffle questions\r\n//   const shuffleArray = (arr) => {\r\n//     const newArr = [...arr];\r\n//     for (let i = newArr.length - 1; i > 0; i--) {\r\n//       const j = Math.floor(Math.random() * (i + 1));\r\n//       [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\r\n//     }\r\n//     return newArr;\r\n//   };\r\n\r\n//   // Load questions or resume\r\n//   useEffect(() => {\r\n//     const storedQuestions = localStorage.getItem(\"exam_questions\");\r\n//     const storedAnswers = localStorage.getItem(\"exam_answers\");\r\n//     const storedCurrent = localStorage.getItem(\"exam_current\");\r\n//     const storedTimeLeft = localStorage.getItem(\"exam_timeLeft\");\r\n\r\n//     getResult(token)\r\n//       .then(res => {\r\n//         if (res.data && res.data.review) {\r\n//           setSubmitted(true);\r\n//           setResult(res.data);\r\n//         } else if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\r\n//           setQuestions(JSON.parse(storedQuestions));\r\n//           setAnswers(JSON.parse(storedAnswers));\r\n//           setCurrent(parseInt(storedCurrent, 10));\r\n//           setTimeLeft(parseInt(storedTimeLeft, 10));\r\n//         } else {\r\n//           getQuestions(token).then(res => {\r\n//             const shuffled = shuffleArray(res.data);\r\n//             setQuestions(shuffled);\r\n//             setAnswers(Array(shuffled.length).fill(undefined)); // undefined for unattempted\r\n//             localStorage.setItem(\"exam_questions\", JSON.stringify(shuffled));\r\n//           }).catch(err => console.error(\"Error fetching questions:\", err));\r\n//         }\r\n//       })\r\n//       .catch(err => {\r\n//         // fallback\r\n//         if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\r\n//           setQuestions(JSON.parse(storedQuestions));\r\n//           setAnswers(JSON.parse(storedAnswers));\r\n//           setCurrent(parseInt(storedCurrent, 10));\r\n//           setTimeLeft(parseInt(storedTimeLeft, 10));\r\n//         }\r\n//       });\r\n//   }, [token]);\r\n\r\n//   // Save progress\r\n//   useEffect(() => {\r\n//     if (questions.length && !submitted) {\r\n//       localStorage.setItem(\"exam_questions\", JSON.stringify(questions));\r\n//       localStorage.setItem(\"exam_answers\", JSON.stringify(answers));\r\n//       localStorage.setItem(\"exam_current\", current);\r\n//       localStorage.setItem(\"exam_timeLeft\", timeLeft);\r\n//     }\r\n//   }, [questions, answers, current, timeLeft, submitted]);\r\n\r\n//   // Countdown\r\n//   useEffect(() => {\r\n//     if (!questions.length || submitted) return;\r\n//     if (timeLeft <= 0) {\r\n//       handleSubmit();\r\n//       return;\r\n//     }\r\n//     const timer = setTimeout(() => setTimeLeft(t => t - 1), 1000);\r\n//     return () => clearTimeout(timer);\r\n//   }, [questions.length, submitted, timeLeft]);\r\n\r\n//   const handleOption = (idx) => {\r\n//     const newAnswers = [...answers];\r\n//     newAnswers[current] = idx;\r\n//     setAnswers(newAnswers);\r\n//   };\r\n\r\n//   const handleSubmit = () => {\r\n//     if (submitted) return;\r\n\r\n//     const payload = questions.map((q, i) => ({\r\n//       questionId: q._id || q.id,\r\n//       selectedOption: answers[i] // can be undefined\r\n//     }));\r\n\r\n//     console.log(\"Submitting payload:\", payload); // debug\r\n\r\n//     submitExam(payload, token)\r\n//       .then(() => {\r\n//         setSubmitted(true);\r\n//         localStorage.removeItem(\"exam_questions\");\r\n//         localStorage.removeItem(\"exam_answers\");\r\n//         localStorage.removeItem(\"exam_current\");\r\n//         localStorage.removeItem(\"exam_timeLeft\");\r\n\r\n//         getResult(token).then(r => {\r\n//           setResult(r.data);\r\n//           window.location.hash = '#/results';\r\n//         });\r\n//       })\r\n//       .catch(err => {\r\n//         console.error(\"Error submitting exam:\", err.response?.data || err.message);\r\n//         alert(\"Error submitting exam. Please try again.\");\r\n//       });\r\n//   };\r\n\r\n//   if (!questions.length && !submitted) {\r\n//     return <div className=\"exam-container\" style={{ textAlign: 'center', padding: '60px 0' }}>Loading questions...</div>;\r\n//   }\r\n\r\n//   if (submitted && result) {\r\n//     return (\r\n//       <div className=\"result-container card\">\r\n//         <h2>Exam Submitted</h2>\r\n//         <div style={{ fontSize: '1.2em', margin: '12px 0' }}>\r\n//           <strong>Score:</strong> {result.score} / {result.review.length}\r\n//         </div>\r\n//         <button onClick={() => window.location.hash = '#/dashboard'}>Return to Dashboard</button>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   const q = questions[current];\r\n//   const minutes = Math.floor(timeLeft / 60);\r\n//   const seconds = timeLeft % 60;\r\n\r\n//   return (\r\n//     <div className=\"exam-container\">\r\n//       <div className=\"exam-timer\" style={{ textAlign: 'right', fontWeight: 600, color: '#d32f2f', marginBottom: 16, fontSize: '1.3em' }}>\r\n//         Time Left: {minutes.toString().padStart(2,'0')}:{seconds.toString().padStart(2,'0')}\r\n//       </div>\r\n\r\n//       <h3>Question {current + 1} of {questions.length}</h3>\r\n//       <div className=\"question\" style={{ marginBottom: 16 }}>{q.question}</div>\r\n\r\n//       <ul style={{ listStyle: 'none', padding: 0 }}>\r\n//         {q.options.map((opt, idx) => (\r\n//           <li key={idx} style={{\r\n//             padding: '8px 12px',\r\n//             margin: '6px 0',\r\n//             border: '2px solid',\r\n//             borderColor: answers[current] === idx ? '#1976d2' : '#ccc',\r\n//             borderRadius: 6,\r\n//             backgroundColor: answers[current] === idx ? '#e3f2fd' : '#fff',\r\n//             cursor: 'pointer',\r\n//             fontWeight: answers[current] === idx ? 600 : 400\r\n//           }}\r\n//           onClick={() => handleOption(idx)}>\r\n//             <span style={{ fontWeight:'bold', marginRight:6 }}>{String.fromCharCode(65+idx)}.</span>\r\n//             {opt}\r\n//           </li>\r\n//         ))}\r\n//       </ul>\r\n\r\n//       <div style={{ display:'flex', gap:'16px', marginTop:'18px' }}>\r\n//         <button disabled={current===0} onClick={()=>setCurrent(c=>c-1)}>Previous</button>\r\n//         <button disabled={current===questions.length-1} onClick={()=>setCurrent(c=>c+1)}>Next</button>\r\n//         <button onClick={handleSubmit}>Submit Exam</button>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Exam;\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import { getQuestions, submitExam, getResult } from './api';\r\n// import './Exam.css';\r\n\r\n// function Exam({ token }) {\r\n//   const [questions, setQuestions] = useState([]);\r\n//   const [answers, setAnswers] = useState([]);\r\n//   const [current, setCurrent] = useState(0);\r\n//   const [submitted, setSubmitted] = useState(false);\r\n//   const [result, setResult] = useState(null);\r\n//   const [timeLeft, setTimeLeft] = useState(30 * 60);\r\n\r\n//   useEffect(() => {\r\n//     getQuestions(token).then(res => {\r\n//       setQuestions(res.data);\r\n//       setAnswers(Array(res.data.length).fill(null));\r\n//     }).catch(err => console.error(err));\r\n//   }, [token]);\r\n\r\n//   useEffect(() => {\r\n//     if (!questions.length || submitted) return;\r\n//     if (timeLeft <= 0) {\r\n//       handleSubmit();\r\n//       return;\r\n//     }\r\n//     const timer = setTimeout(() => setTimeLeft(t => t - 1), 1000);\r\n//     return () => clearTimeout(timer);\r\n//   }, [timeLeft, questions, submitted]);\r\n\r\n//   const handleOption = idx => {\r\n//     const newAnswers = [...answers];\r\n//     newAnswers[current] = idx;\r\n//     setAnswers(newAnswers);\r\n//   };\r\n\r\n//   const handleSubmit = () => {\r\n//     if (submitted) return;\r\n//     const payload = questions.map((q, i) => ({ questionId: q._id, selectedOption: answers[i] }));\r\n//     submitExam(payload, token)\r\n//       .then(() => getResult(token))\r\n//       .then(r => {\r\n//         setSubmitted(true);\r\n//         setResult(r.data);\r\n//         window.location.hash = '#/results';\r\n//       })\r\n//       .catch(err => alert('Error submitting exam. Please try again.'));\r\n//   };\r\n\r\n//   if (!questions.length) return <div>Loading questions...</div>;\r\n\r\n//   if (submitted && result) return (\r\n//     <div>\r\n//       <h2>Exam Submitted</h2>\r\n//       <div>Score: {result.score} / {result.review.length}</div>\r\n//       <button onClick={() => window.location.hash = '#/dashboard'}>Return to Dashboard</button>\r\n//     </div>\r\n//   );\r\n\r\n//   const q = questions[current];\r\n//   const minutes = Math.floor(timeLeft / 60);\r\n//   const seconds = timeLeft % 60;\r\n\r\n//   return (\r\n//     <div className=\"exam-container\">\r\n//       <div>Time Left: {minutes}:{seconds.toString().padStart(2,'0')}</div>\r\n//       <h3>Question {current+1} of {questions.length}</h3>\r\n//       <div>{q.question}</div>\r\n//       <ul>\r\n//         {q.options.map((opt, i) => (\r\n//           <li key={i} onClick={() => handleOption(i)} style={{ fontWeight: answers[current] === i ? 'bold' : 'normal' }}>\r\n//             {String.fromCharCode(65+i)}. {opt}\r\n//           </li>\r\n//         ))}\r\n//       </ul>\r\n//       <div>\r\n//         <button disabled={current===0} onClick={()=>setCurrent(c=>c-1)}>Previous</button>\r\n//         <button disabled={current===questions.length-1} onClick={()=>setCurrent(c=>c+1)}>Next</button>\r\n//         <button onClick={handleSubmit}>Submit Exam</button>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Exam;\r\n\r\n\r\n// import React, { useState, useEffect } from \"react\";\r\n// import axios from \"axios\";   // ✅ Add this line\r\n// import { getQuestions, submitExam, getResult } from \"./api\";\r\n// import \"./Exam.css\";\r\n\r\n// function Exam({ token }) {\r\n//   const [questions, setQuestions] = useState([]);\r\n//   const [answers, setAnswers] = useState([]);\r\n//   const [current, setCurrent] = useState(0);\r\n//   const [submitted, setSubmitted] = useState(false);\r\n//   const [result, setResult] = useState(null);\r\n//   const [timeLeft, setTimeLeft] = useState(30 * 60);\r\n\r\n//   const shuffleArray = (arr) => {\r\n//     let newArr = [...arr];\r\n//     for (let i = newArr.length - 1; i > 0; i--) {\r\n//       const j = Math.floor(Math.random() * (i + 1));\r\n//       [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\r\n//     }\r\n//     return newArr;\r\n//   };\r\n\r\n//   // Load state or fetch\r\n//   useEffect(() => {\r\n//     const storedQuestions = localStorage.getItem(\"exam_questions\");\r\n//     const storedAnswers = localStorage.getItem(\"exam_answers\");\r\n//     const storedCurrent = localStorage.getItem(\"exam_current\");\r\n//     const storedTimeLeft = localStorage.getItem(\"exam_timeLeft\");\r\n\r\n//     if (storedQuestions && storedAnswers && storedCurrent && storedTimeLeft) {\r\n//       setQuestions(JSON.parse(storedQuestions));\r\n//       setAnswers(JSON.parse(storedAnswers));\r\n//       setCurrent(parseInt(storedCurrent, 10));\r\n//       setTimeLeft(parseInt(storedTimeLeft, 10));\r\n//     } else {\r\n//       getQuestions(token).then((res) => {\r\n//         const shuffled = shuffleArray(res.data);\r\n//         setQuestions(shuffled);\r\n//         setAnswers(Array(shuffled.length).fill(null));\r\n//         localStorage.setItem(\"exam_questions\", JSON.stringify(shuffled));\r\n//         localStorage.setItem(\"exam_answers\", JSON.stringify(Array(shuffled.length).fill(null)));\r\n//         localStorage.setItem(\"exam_current\", 0);\r\n//         localStorage.setItem(\"exam_timeLeft\", 30 * 60);\r\n//       });\r\n//     }\r\n//   }, [token]);\r\n\r\n//   // Save progress\r\n//   useEffect(() => {\r\n//     if (questions.length && !submitted) {\r\n//       localStorage.setItem(\"exam_questions\", JSON.stringify(questions));\r\n//       localStorage.setItem(\"exam_answers\", JSON.stringify(answers));\r\n//       localStorage.setItem(\"exam_current\", current);\r\n//       localStorage.setItem(\"exam_timeLeft\", timeLeft);\r\n//     }\r\n//   }, [questions, answers, current, timeLeft, submitted]);\r\n\r\n//   // Timer\r\n//   useEffect(() => {\r\n//     if (!questions.length || submitted) return;\r\n//     if (timeLeft <= 0) {\r\n//       handleSubmit();\r\n//       return;\r\n//     }\r\n//     const timer = setTimeout(() => {\r\n//       setTimeLeft((t) => {\r\n//         localStorage.setItem(\"exam_timeLeft\", t - 1);\r\n//         return t - 1;\r\n//       });\r\n//     }, 1000);\r\n//     return () => clearTimeout(timer);\r\n//   }, [questions.length, submitted, timeLeft]);\r\n\r\n//   const handleOption = (idx) => {\r\n//     const newAnswers = [...answers];\r\n//     newAnswers[current] = idx;\r\n//     setAnswers(newAnswers);\r\n//   };\r\n\r\n//   const handleSubmit = () => {\r\n//     if (submitted) return;\r\n//     const payload = questions.map((q, i) => ({ questionId: q._id, selectedOption: answers[i] }));\r\n\r\n//     submitExam(payload, token)\r\n//       .then(() => {\r\n//         setSubmitted(true);\r\n//         localStorage.removeItem(\"exam_questions\");\r\n//         localStorage.removeItem(\"exam_answers\");\r\n//         localStorage.removeItem(\"exam_current\");\r\n//         localStorage.removeItem(\"exam_timeLeft\");\r\n\r\n//         getResult(token).then((r) => {\r\n//           setResult(r.data);\r\n//           window.location.hash = \"#/results\";\r\n//         });\r\n//       })\r\n//       .catch(() => alert(\"Error submitting exam. Please try again.\"));\r\n//   };\r\n\r\n//   if (!questions.length && !submitted) return <div className=\"exam-container\">Loading questions...</div>;\r\n//   if (submitted && result)\r\n//     return (\r\n//       <div className=\"exam-container\">\r\n//         <h2>Exam Submitted</h2>\r\n//         <div>\r\n//           Score: {result.score} / {result.review.length}\r\n//         </div>\r\n//         <button onClick={() => (window.location.hash = \"#/dashboard\")}>Return to Dashboard</button>\r\n//       </div>\r\n//     );\r\n\r\n//   const q = questions[current];\r\n//   const minutes = Math.floor(timeLeft / 60);\r\n//   const seconds = timeLeft % 60;\r\n\r\n//   return (\r\n//     <div className=\"exam-container\">\r\n//       <div style={{ textAlign: \"right\", color: \"#d32f2f\", fontWeight: 600 }}>\r\n//         Time Left: {minutes.toString().padStart(2, \"0\")}:{seconds.toString().padStart(2, \"0\")}\r\n//       </div>\r\n//       <h3>\r\n//         Question {current + 1} of {questions.length}\r\n//       </h3>\r\n//       <div>{q.question}</div>\r\n//       <ul style={{ listStyle: \"none\", padding: 0 }}>\r\n//         {q.options.map((opt, idx) => (\r\n//           <li\r\n//             key={idx}\r\n//             onClick={() => handleOption(idx)}\r\n//             style={{\r\n//               padding: \"8px\",\r\n//               margin: \"6px 0\",\r\n//               border: answers[current] === idx ? \"2px solid #1976d2\" : \"2px solid #ccc\",\r\n//               borderRadius: 6,\r\n//               backgroundColor: answers[current] === idx ? \"#e3f2fd\" : \"#fff\",\r\n//               cursor: \"pointer\",\r\n//             }}\r\n//           >\r\n//             {String.fromCharCode(65 + idx)}. {opt}\r\n//           </li>\r\n//         ))}\r\n//       </ul>\r\n//       <div style={{ display: \"flex\", gap: \"12px\", marginTop: \"16px\" }}>\r\n//         <button disabled={current === 0} onClick={() => setCurrent((c) => c - 1)}>\r\n//           Previous\r\n//         </button>\r\n//         <button disabled={current === questions.length - 1} onClick={() => setCurrent((c) => c + 1)}>\r\n//           Next\r\n//         </button>\r\n//         <button onClick={handleSubmit}>Submit Exam</button>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n// import React, { useState, useEffect } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./Exam.css\";\r\n// // Before: import { getQuestions, submitExam, getResult } from \"./api\";\r\n// import { getQuestions, submitExam, getResult } from \"./api.js\";\r\n\r\n// function Exam({ token }) {\r\n//   const [questions, setQuestions] = useState([]);\r\n//   const [answers, setAnswers] = useState([]);\r\n//   const [current, setCurrent] = useState(0);\r\n//   const [submitted, setSubmitted] = useState(false);\r\n//   const [result, setResult] = useState(null);\r\n//   const [timeLeft, setTimeLeft] = useState(30 * 60);\r\n\r\n//   // Fetch questions from backend\r\n//   useEffect(() => {\r\n//     if (!token) return;\r\n\r\n//     axios\r\n//       .get(\"http://localhost:5000/api/exam/questions\", {\r\n//         headers: { Authorization: `Bearer ${token}` },\r\n//       })\r\n//       .then((res) => {\r\n//         setQuestions(res.data);\r\n//         setAnswers(Array(res.data.length).fill(null));\r\n//       })\r\n//       .catch((err) => console.error(\"Failed to fetch questions:\", err));\r\n//   }, [token]);\r\n\r\n//   // Timer\r\n//   useEffect(() => {\r\n//     if (!questions.length || submitted) return;\r\n//     if (timeLeft <= 0) {\r\n//       handleSubmit();\r\n//       return;\r\n//     }\r\n//     const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);\r\n//     return () => clearTimeout(timer);\r\n//   }, [timeLeft, questions.length, submitted]);\r\n\r\n//   const handleOption = (idx) => {\r\n//     const newAnswers = [...answers];\r\n//     newAnswers[current] = idx;\r\n//     setAnswers(newAnswers);\r\n//   };\r\n\r\n//   const handleSubmit = () => {\r\n//   if (submitted) return;\r\n\r\n//   const payload = questions.map((q, i) => ({\r\n//     questionId: q._id,\r\n//     selectedOption: answers[i],\r\n//   }));\r\n\r\n//   submitExam(payload, token)\r\n//     .then((res) => {\r\n//       setSubmitted(true);\r\n//       localStorage.removeItem(\"exam_questions\");\r\n//       localStorage.removeItem(\"exam_answers\");\r\n//       localStorage.removeItem(\"exam_current\");\r\n//       localStorage.removeItem(\"exam_timeLeft\");\r\n\r\n//       // Fetch result immediately\r\n//       getResult(token)\r\n//         .then((r) => {\r\n//           setResult(r.data);\r\n//           window.location.hash = \"#/results\";\r\n//         })\r\n//         .catch((err) => console.error(err));\r\n//     })\r\n//     .catch((err) => {\r\n//       console.error(err);\r\n//       alert(err.response?.data?.message || \"Error submitting exam\");\r\n//     });\r\n// };\r\n\r\n\r\n//   if (!questions.length) return <div className=\"exam-container\">Loading questions...</div>;\r\n\r\n//   if (submitted && result)\r\n//     return (\r\n//       <div className=\"exam-container\">\r\n//         <h2>Exam Submitted</h2>\r\n//         <div>\r\n//           Score: {result.score} / {result.answers.length}\r\n//         </div>\r\n//         <button onClick={() => (window.location.hash = \"#/dashboard\")}>\r\n//           Return to Dashboard\r\n//         </button>\r\n//       </div>\r\n//     );\r\n\r\n//   const q = questions[current];\r\n//   const minutes = Math.floor(timeLeft / 60);\r\n//   const seconds = timeLeft % 60;\r\n\r\n//   return (\r\n//     <div className=\"exam-container\">\r\n//       <div style={{ textAlign: \"right\", color: \"#d32f2f\", fontWeight: 600 }}>\r\n//         Time Left: {minutes.toString().padStart(2, \"0\")}:{seconds.toString().padStart(2, \"0\")}\r\n//       </div>\r\n//       <h3>\r\n//         Question {current + 1} of {questions.length}\r\n//       </h3>\r\n//       <div>{q.question}</div>\r\n//       <ul style={{ listStyle: \"none\", padding: 0 }}>\r\n//         {q.options.map((opt, idx) => (\r\n//           <li\r\n//             key={idx}\r\n//             onClick={() => handleOption(idx)}\r\n//             style={{\r\n//               padding: \"8px\",\r\n//               margin: \"6px 0\",\r\n//               border: answers[current] === idx ? \"2px solid #1976d2\" : \"2px solid #ccc\",\r\n//               borderRadius: 6,\r\n//               backgroundColor: answers[current] === idx ? \"#e3f2fd\" : \"#fff\",\r\n//               cursor: \"pointer\",\r\n//             }}\r\n//           >\r\n//             {String.fromCharCode(65 + idx)}. {opt}\r\n//           </li>\r\n//         ))}\r\n//       </ul>\r\n//       <div style={{ display: \"flex\", gap: \"12px\", marginTop: \"16px\" }}>\r\n//         <button disabled={current === 0} onClick={() => setCurrent(current - 1)}>\r\n//           Previous\r\n//         </button>\r\n//         <button disabled={current === questions.length - 1} onClick={() => setCurrent(current + 1)}>\r\n//           Next\r\n//         </button>\r\n//         <button onClick={handleSubmit}>Submit Exam</button>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Exam;\r\n\r\n// import React, { useState, useEffect } from \"react\";\r\n// import { getQuestions, submitExam, getResult } from \"./api.js\";\r\n\r\n// function Exam({ token }) {\r\n//   const [questions, setQuestions] = useState([]);\r\n//   const [answers, setAnswers] = useState([]);\r\n//   const [current, setCurrent] = useState(0);\r\n//   const [submitted, setSubmitted] = useState(false);\r\n//   const [result, setResult] = useState(null);\r\n//   const [timeLeft, setTimeLeft] = useState(30 * 60);\r\n\r\n//   // Load state from localStorage\r\n//   useEffect(() => {\r\n//     const savedQuestions = JSON.parse(localStorage.getItem(\"exam_questions\"));\r\n//     const savedAnswers = JSON.parse(localStorage.getItem(\"exam_answers\"));\r\n//     const savedCurrent = parseInt(localStorage.getItem(\"exam_current\"));\r\n//     const savedTime = parseInt(localStorage.getItem(\"exam_timeLeft\"));\r\n\r\n//     if (savedQuestions?.length) {\r\n//       setQuestions(savedQuestions);\r\n//       setAnswers(savedAnswers || Array(savedQuestions.length).fill(null));\r\n//       setCurrent(!isNaN(savedCurrent) ? savedCurrent : 0);\r\n//       setTimeLeft(!isNaN(savedTime) ? savedTime : 30 * 60);\r\n//     } else {\r\n//       // Fetch from backend\r\n//       fetchQuestions();\r\n//     }\r\n//   }, [token]);\r\n\r\n//   const fetchQuestions = async () => {\r\n//     try {\r\n//       const res = await getQuestions(token);\r\n//       setQuestions(res.data);\r\n//       setAnswers(Array(res.data.length).fill(null));\r\n//       localStorage.setItem(\"exam_questions\", JSON.stringify(res.data));\r\n//       localStorage.setItem(\"exam_answers\", JSON.stringify(Array(res.data.length).fill(null)));\r\n//     } catch (err) {\r\n//       console.error(\"Failed to fetch questions:\", err);\r\n//     }\r\n//   };\r\n\r\n//   // Timer\r\n//   useEffect(() => {\r\n//     if (!questions.length || submitted) return;\r\n//     if (timeLeft <= 0) {\r\n//       handleSubmit();\r\n//       return;\r\n//     }\r\n//     const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);\r\n//     return () => clearTimeout(timer);\r\n//   }, [timeLeft, questions.length, submitted]);\r\n\r\n//   // Save state on changes\r\n//   useEffect(() => {\r\n//     localStorage.setItem(\"exam_current\", current);\r\n//     localStorage.setItem(\"exam_answers\", JSON.stringify(answers));\r\n//     localStorage.setItem(\"exam_timeLeft\", timeLeft);\r\n//   }, [current, answers, timeLeft]);\r\n\r\n//   const handleOption = (idx) => {\r\n//     const newAnswers = [...answers];\r\n//     newAnswers[current] = idx;\r\n//     setAnswers(newAnswers);\r\n//   };\r\n\r\n//   const handleSubmit = async () => {\r\n//     if (submitted) return;\r\n//     const payload = questions.map((q, i) => ({\r\n//       questionId: q._id,\r\n//       selectedOption: answers[i],\r\n//     }));\r\n\r\n//     try {\r\n//       await submitExam(payload, token);\r\n//       setSubmitted(true);\r\n\r\n//       // Clear localStorage\r\n//       localStorage.removeItem(\"exam_questions\");\r\n//       localStorage.removeItem(\"exam_answers\");\r\n//       localStorage.removeItem(\"exam_current\");\r\n//       localStorage.removeItem(\"exam_timeLeft\");\r\n\r\n//       const r = await getResult(token);\r\n//       setResult(r.data);\r\n//       window.location.hash = \"#/results\";\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       alert(err.response?.data?.message || \"Error submitting exam\");\r\n//     }\r\n//   };\r\n\r\n//   if (!questions.length) return <div className=\"exam-container\">Loading questions...</div>;\r\n\r\n//   if (submitted && result)\r\n//     return (\r\n//       <div className=\"exam-container\">\r\n//         <h2>Exam Submitted</h2>\r\n//         <div>\r\n//           Score: {result.score} / {result.answers.length}\r\n//         </div>\r\n//         <button onClick={() => (window.location.hash = \"#/dashboard\")}>Return to Dashboard</button>\r\n//       </div>\r\n//     );\r\n\r\n//   const q = questions[current];\r\n//   const minutes = Math.floor(timeLeft / 60);\r\n//   const seconds = timeLeft % 60;\r\n\r\n//   return (\r\n//     <div className=\"exam-container\">\r\n//       <div style={{ textAlign: \"right\", color: \"#d32f2f\", fontWeight: 600 }}>\r\n//         Time Left: {minutes.toString().padStart(2, \"0\")}:{seconds.toString().padStart(2, \"0\")}\r\n//       </div>\r\n//       <h3>\r\n//         Question {current + 1} of {questions.length}\r\n//       </h3>\r\n//       <div>{q.question}</div>\r\n//       <ul style={{ listStyle: \"none\", padding: 0 }}>\r\n//         {q.options.map((opt, idx) => (\r\n//           <li\r\n//             key={idx}\r\n//             onClick={() => handleOption(idx)}\r\n//             style={{\r\n//               padding: \"8px\",\r\n//               margin: \"6px 0\",\r\n//               border: answers[current] === idx ? \"2px solid #1976d2\" : \"2px solid #ccc\",\r\n//               borderRadius: 6,\r\n//               backgroundColor: answers[current] === idx ? \"#e3f2fd\" : \"#fff\",\r\n//               cursor: \"pointer\",\r\n//             }}\r\n//           >\r\n//             {String.fromCharCode(65 + idx)}. {opt}\r\n//           </li>\r\n//         ))}\r\n//       </ul>\r\n//       <div style={{ display: \"flex\", gap: \"12px\", marginTop: \"16px\" }}>\r\n//         <button disabled={current === 0} onClick={() => setCurrent(current - 1)}>Previous</button>\r\n//         <button disabled={current === questions.length - 1} onClick={() => setCurrent(current + 1)}>Next</button>\r\n//         <button onClick={handleSubmit}>Submit Exam</button>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default Exam;\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction Exam({ token }) {\r\n  const [questions, setQuestions] = useState([]);\r\n  const [answers, setAnswers] = useState({});\r\n\r\n  useEffect(() => {\r\n    // When the exam page loads, mark as in progress\r\n    localStorage.setItem(\"inExam\", \"true\");\r\n\r\n    axios\r\n      .get(\"http://localhost:5000/api/exam\", {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      })\r\n      .then((res) => {\r\n        setQuestions(res.data.questions);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Error fetching exam questions:\", err);\r\n      });\r\n  }, [token]);\r\n\r\n  const handleAnswerChange = (qId, value) => {\r\n    setAnswers((prev) => ({\r\n      ...prev,\r\n      [qId]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    axios\r\n      .post(\r\n        \"http://localhost:5000/api/exam/submit\",\r\n        { answers },\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      )\r\n      .then(() => {\r\n        // Exam submitted → clear flag\r\n        localStorage.removeItem(\"inExam\");\r\n        window.location.hash = \"#/results\";\r\n      })\r\n      .catch((err) => {\r\n        alert(\"Submit failed, please try again.\");\r\n        console.error(err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Exam</h1>\r\n      {questions.map((q) => (\r\n        <div key={q._id}>\r\n          <p>{q.text}</p>\r\n          {q.options.map((opt, i) => (\r\n            <label key={i}>\r\n              <input\r\n                type=\"radio\"\r\n                name={q._id}\r\n                value={opt}\r\n                checked={answers[q._id] === opt}\r\n                onChange={(e) =>\r\n                  handleAnswerChange(q._id, e.target.value)\r\n                }\r\n              />\r\n              {opt}\r\n            </label>\r\n          ))}\r\n        </div>\r\n      ))}\r\n      <button onClick={handleSubmit}>Submit Exam</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Exam;\r\n"],"mappings":";;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,SAASC,IAAIA,CAAC;EAAEC;AAAM,CAAC,EAAE;EAAAC,EAAA;EACvB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,CAAC,CAAC,CAAC;EAE1CC,SAAS,CAAC,MAAM;IACd;IACAW,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAE,MAAM,CAAC;IAEtCX,KAAK,CACFY,GAAG,CAAC,gCAAgC,EAAE;MACrCC,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUV,KAAK;MAAG;IAC9C,CAAC,CAAC,CACDW,IAAI,CAAEC,GAAG,IAAK;MACbT,YAAY,CAACS,GAAG,CAACC,IAAI,CAACX,SAAS,CAAC;IAClC,CAAC,CAAC,CACDY,KAAK,CAAEC,GAAG,IAAK;MACdC,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEF,GAAG,CAAC;IACtD,CAAC,CAAC;EACN,CAAC,EAAE,CAACf,KAAK,CAAC,CAAC;EAEX,MAAMkB,kBAAkB,GAAGA,CAACC,GAAG,EAAEC,KAAK,KAAK;IACzCf,UAAU,CAAEgB,IAAI,KAAM;MACpB,GAAGA,IAAI;MACP,CAACF,GAAG,GAAGC;IACT,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAME,YAAY,GAAGA,CAAA,KAAM;IACzB1B,KAAK,CACF2B,IAAI,CACH,uCAAuC,EACvC;MAAEnB;IAAQ,CAAC,EACX;MACEK,OAAO,EAAE;QAAEC,aAAa,EAAE,UAAUV,KAAK;MAAG;IAC9C,CACF,CAAC,CACAW,IAAI,CAAC,MAAM;MACV;MACAL,YAAY,CAACkB,UAAU,CAAC,QAAQ,CAAC;MACjCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,WAAW;IACpC,CAAC,CAAC,CACDb,KAAK,CAAEC,GAAG,IAAK;MACda,KAAK,CAAC,kCAAkC,CAAC;MACzCZ,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IACpB,CAAC,CAAC;EACN,CAAC;EAED,oBACEjB,OAAA;IAAA+B,QAAA,gBACE/B,OAAA;MAAA+B,QAAA,EAAI;IAAI;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACZ/B,SAAS,CAACgC,GAAG,CAAEC,CAAC,iBACfrC,OAAA;MAAA+B,QAAA,gBACE/B,OAAA;QAAA+B,QAAA,EAAIM,CAAC,CAACC;MAAI;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EACdE,CAAC,CAACE,OAAO,CAACH,GAAG,CAAC,CAACI,GAAG,EAAEC,CAAC,kBACpBzC,OAAA;QAAA+B,QAAA,gBACE/B,OAAA;UACE0C,IAAI,EAAC,OAAO;UACZC,IAAI,EAAEN,CAAC,CAACO,GAAI;UACZtB,KAAK,EAAEkB,GAAI;UACXK,OAAO,EAAEvC,OAAO,CAAC+B,CAAC,CAACO,GAAG,CAAC,KAAKJ,GAAI;UAChCM,QAAQ,EAAGC,CAAC,IACV3B,kBAAkB,CAACiB,CAAC,CAACO,GAAG,EAAEG,CAAC,CAACC,MAAM,CAAC1B,KAAK;QACzC;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC,EACDK,GAAG;MAAA,GAVMC,CAAC;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAWN,CACR,CAAC;IAAA,GAfME,CAAC,CAACO,GAAG;MAAAZ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAgBV,CACN,CAAC,eACFnC,OAAA;MAAQiD,OAAO,EAAEzB,YAAa;MAAAO,QAAA,EAAC;IAAW;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAChD,CAAC;AAEV;AAAChC,EAAA,CAxEQF,IAAI;AAAAiD,EAAA,GAAJjD,IAAI;AA0Eb,eAAeA,IAAI;AAAC,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}